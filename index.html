<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRNT</title>
    <style>
        /* --- DESIGN SETTINGS --- */
        :root {
            --bg-color: #ffffff;
            --text-color: #111111;
            --card-bg: #ffffff;
            --accent-color: #000000;
            --gray-light: #f4f4f4;
            --border-color: #e5e5e5;
            --badge-warn: #ff9800;
            --badge-error: #f44336;
            --gold: #FFD700;
        }

        /* DARK MODE VARIABLES */
        body.dark-mode {
            --bg-color: #121212;
            --text-color: #ffffff;
            --card-bg: #1e1e1e;
            --accent-color: #ffffff;
            --gray-light: #2c2c2c;
            --border-color: #333333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        /* --- MARQUEE (SCROLLING TEXT) --- */
        .marquee {
            background: var(--accent-color); color: var(--bg-color);
            overflow: hidden; white-space: nowrap; padding: 8px 0;
            font-size: 0.85rem; font-weight: bold; text-transform: uppercase;
        }
        .marquee-content {
            display: inline-block;
            animation: scroll 20s linear infinite;
        }
        @keyframes scroll {
            0% { transform: translateX(100vw); }
            100% { transform: translateX(-100%); }
        }

        /* --- NAVIGATION --- */
        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px 40px; border-bottom: 1px solid var(--border-color);
            position: sticky; top: 0; background: var(--bg-color);
            opacity: 0.98; z-index: 100;
        }

        .nav-right { display: flex; align-items: center; gap: 20px; }
        
        .logo { font-size: 1.2rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }

        .nav-btn {
            cursor: pointer; font-weight: 500; font-size: 0.9rem;
            border: 1px solid var(--border-color); padding: 8px 16px;
            border-radius: 4px; transition: all 0.2s; display: flex; align-items: center; gap: 5px;
        }

        .nav-btn:hover {
            background: var(--text-color); color: var(--bg-color); border-color: var(--text-color);
        }

        /* --- LAYOUT --- */
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        
        .drop-banner {
            background: var(--gray-light); padding: 10px; text-align: center;
            font-size: 0.9rem; font-weight: 600; margin-bottom: 30px; border-radius: 4px;
        }

        .intro { margin-bottom: 40px; max-width: 600px; }
        .intro h1 { font-size: 2.5rem; letter-spacing: -1px; margin-bottom: 10px; }
        .intro p { color: #888; }

        /* --- TOP SELLERS --- */
        .top-sellers {
            border: 2px solid var(--gold); border-radius: 8px; padding: 20px;
            margin-bottom: 40px; position: relative;
        }
        .top-sellers::before {
            content: "üèÜ TOP SELLERS"; position: absolute; top: -12px; left: 20px;
            background: var(--gold); color: black; padding: 0 10px;
            font-weight: bold; font-size: 0.8rem; border-radius: 4px;
        }
        .ts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }

        /* --- FILTERS --- */
        .filters { margin-bottom: 30px; display: flex; gap: 10px; flex-wrap: wrap; }
        .filter-btn {
            background: transparent; border: 1px solid var(--border-color);
            color: var(--text-color); padding: 8px 16px; border-radius: 20px;
            cursor: pointer; font-size: 0.9rem; transition: 0.2s;
        }
        .filter-btn:hover, .filter-btn.active {
            background: var(--text-color); color: var(--bg-color); border-color: var(--text-color);
        }

        /* --- PRODUCT GRID --- */
        .grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 40px 20px;
        }

        .product-card {
            display: flex; flex-direction: column; 
            background: var(--card-bg); border-radius: 8px;
            position: relative;
        }

        .badge {
            position: absolute; top: 10px; left: 10px;
            padding: 4px 8px; border-radius: 4px; color: white;
            font-size: 0.75rem; font-weight: bold; text-transform: uppercase;
            z-index: 10;
        }
        .badge.low { background-color: var(--badge-warn); }
        .badge.out { background-color: var(--badge-error); }
        .badge.mystery { background-color: #9c27b0; }

        .image-container {
            background-color: var(--gray-light); aspect-ratio: 1 / 1;
            width: 100%; border-radius: 4px; overflow: hidden; margin-bottom: 15px;
        }

        .product-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; }
        .product-card:hover .product-img { transform: scale(1.03); }

        .info { margin-bottom: 10px; }
        .product-name { font-weight: 600; font-size: 1rem; margin: 0; }
        .product-price { color: #888; font-size: 0.95rem; margin-top: 4px; }

        select.color-select {
            width: 100%; padding: 8px; margin-bottom: 10px;
            border: 1px solid var(--border-color); border-radius: 4px;
            background: var(--bg-color); color: var(--text-color);
        }

        .add-btn {
            width: 100%; padding: 12px; background: transparent;
            border: 1px solid var(--border-color); color: var(--text-color);
            font-weight: 600; cursor: pointer; transition: all 0.2s;
        }
        .add-btn:hover { background: var(--text-color); color: var(--bg-color); }
        .add-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* --- FAQ --- */
        .faq-section { margin-top: 80px; padding-top: 40px; border-top: 1px solid var(--border-color); }
        .faq-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .request-btn {
            display: inline-block; margin-top: 20px; text-decoration: none;
            color: var(--text-color); border-bottom: 1px solid var(--text-color);
            padding-bottom: 2px; font-weight: bold;
        }

        /* --- MODAL (Shared styles for Cart & Login) --- */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 200;
            align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s;
        }
        .modal.active { display: flex; opacity: 1; }

        .modal-content {
            background: var(--bg-color); width: 90%; max-width: 450px;
            padding: 30px; border-radius: 8px; box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .cart-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px; border-bottom: 1px solid var(--border-color); padding-bottom: 15px;
        }

        .cart-item { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.95rem; }
        .cart-item-details { font-size: 0.85rem; color: #888; }
        .remove { color: #888; cursor: pointer; margin-left: 10px; font-size: 0.8rem; }
        .remove:hover { color: var(--badge-error); }
        .discount-row { color: #4caf50; font-weight: bold; display: flex; justify-content: space-between; margin-top: 10px; padding-top: 10px; border-top: 1px dashed var(--border-color); }

        input[type="text"], input[type="email"] {
            width: 100%; padding: 12px; margin-top: 20px;
            border: 1px solid var(--border-color); border-radius: 4px; 
            box-sizing: border-box; font-size: 1rem; background: var(--bg-color); color: var(--text-color);
        }

        .checkout-btn {
            background: var(--accent-color); color: var(--bg-color); border: none;
            width: 100%; padding: 15px; font-size: 1rem; font-weight: 600;
            margin-top: 15px; cursor: pointer;
        }

        /* --- BOSS KEY --- */
        .boss-btn {
            position: fixed; bottom: 20px; left: 20px;
            background: var(--card-bg); border: 1px solid var(--border-color);
            padding: 10px; border-radius: 50%; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); z-index: 999;
            font-size: 1.5rem;
        }
        
        #boss-screen {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; color: black; z-index: 10000; padding: 40px; font-family: 'Times New Roman', serif;
        }
        #boss-screen h1 { text-align: center; border-bottom: 1px solid black; padding-bottom: 20px; }
        #boss-screen p { margin-bottom: 15px; font-size: 1.1rem; }
    </style>
</head>
<body>

<div id="error-box"></div>

<!-- BOSS MODE SCREEN -->
<div id="boss-screen" onclick="toggleBossMode()">
    <h1>Pre-Algebra - Homework 3.4</h1>
    <p><strong>Name:</strong> ____________________ &nbsp;&nbsp;&nbsp; <strong>Date:</strong> ________</p>
    <br>
    <p>1. Evaluate the expression: 5 + (3 &times; 4) - 2</p>
    <p style="margin-top: 100px;">2. Solve for x: 3x = 21</p>
    <p style="margin-top: 100px;">3. Find the perimeter of a rectangle with length 8 and width 3.</p>
    <p style="color: #999; font-size: 0.8rem; margin-top: 100px; text-align: center;">(Click anywhere to return to shop)</p>
</div>

<!-- BOSS BUTTON -->
<div class="boss-btn" onclick="toggleBossMode()" title="Teacher Mode">üéì</div>

<!-- MARQUEE -->
<div class="marquee">
    <div class="marquee-content">
        üì¢ New Colors Available ‚Ä¢ Bundle Deal: Buy 3+ items, get $2 OFF! ‚Ä¢ Restock coming Sunday 5PM ‚Ä¢ üì¢
    </div>
</div>

<nav>
    <div class="logo">PRNT</div>
    <div class="nav-right">
        <div class="nav-btn theme-toggle" onclick="toggleTheme()">üåô</div>
        <div class="nav-btn" onclick="toggleLogin()" id="user-btn">üë§ Login</div>
        <div class="nav-btn cart-link" onclick="toggleCart()">Cart (<span id="cart-count">0</span>)</div>
    </div>
</nav>

<div class="container">
    <div class="drop-banner">
        üî• NEXT DROP IN: <span id="countdown">Loading...</span>
    </div>

    <div class="intro">
        <h1 id="welcome-msg">Freshly Printed.</h1>
        <p>Order online. Pickup & Pay at <strong>Locker 253</strong>.</p>
    </div>

    <!-- TOP SELLERS -->
    <div class="top-sellers">
        <div class="ts-grid" id="top-sellers-grid">
            <!-- Loaded via JS -->
        </div>
    </div>

    <div class="filters">
        <button class="filter-btn active" onclick="filterProducts('all', this)">All</button>
        <button class="filter-btn" onclick="filterProducts('fidget', this)">Fidgets</button>
        <button class="filter-btn" onclick="filterProducts('tech', this)">Tech</button>
        <button class="filter-btn" onclick="filterProducts('style', this)">Style</button>
        <button class="filter-btn" onclick="filterProducts('bundle', this)">Bundles</button>
    </div>

    <div class="grid" id="product-grid">
        <!-- Products load here -->
    </div>

    <div class="faq-section">
        <div class="faq-grid">
            <div class="faq-item">
                <h3>How do I pay?</h3>
                <p>Cash or Apple Pay. Pay when you pick up your item at Locker 253.</p>
            </div>
            <div class="faq-item">
                <h3>When is pickup?</h3>
                <p>Between classes or after school. Just show me your order ticket.</p>
            </div>
            <div class="faq-item">
                <h3>Can I request a print?</h3>
                <p>Yes! If you see a cool model online, let me know.</p>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSfqQSphyWdzpTE4gcKEaplw28vfwDvucOHbb0pz48ErmiUIlQ/viewform?usp=publish-editor" target="_blank" class="request-btn">Request a Print ‚Üí</a>
            </div>
        </div>
    </div>
</div>

<!-- Cart Modal -->
<div class="modal" id="cart-modal">
    <div class="modal-content">
        <div class="cart-header">
            <h2 style="margin:0">Your Cart</h2>
            <span style="cursor:pointer" onclick="toggleCart()">‚úï</span>
        </div>
        
        <div id="cart-items"><p style="color:#888">Your cart is empty.</p></div>

        <div style="margin-top: 20px; font-weight: bold; text-align: right;">
            Total: $<span id="cart-total">0.00</span>
        </div>

        <!-- Checkout name input (hidden if logged in) -->
        <div id="guest-checkout-fields">
            <input type="text" id="guest-name" placeholder="Enter Your Name" required>
        </div>
        
        <button class="checkout-btn" onclick="checkout()">Checkout via Email</button>
    </div>
</div>

<!-- Login Modal -->
<div class="modal" id="login-modal">
    <div class="modal-content">
        <div class="cart-header">
            <h2 style="margin:0">Student Login</h2>
            <span style="cursor:pointer" onclick="toggleLogin()">‚úï</span>
        </div>
        
        <div id="login-form">
            <p>Enter your info once, and I'll remember you for next time!</p>
            <input type="text" id="login-name" placeholder="Your Name" required>
            <input type="text" id="login-email" placeholder="School Email (Optional)">
            <button class="checkout-btn" onclick="login()">Login</button>
        </div>

        <div id="profile-view" style="display:none;">
            <p>Logged in as: <strong id="profile-name"></strong></p>
            <p>Email: <span id="profile-email"></span></p>
            <button class="checkout-btn" style="background:var(--badge-error); margin-top:10px;" onclick="logout()">Log Out</button>
        </div>
    </div>
</div>

<script>
window.onerror = function(msg, src, line) {
    document.getElementById('error-box').style.display = 'block';
    document.getElementById('error-box').innerHTML = `Error: ${msg} on line ${line}`;
};

const myEmail = "yourname@ecsd.us"; 

// --- üõ†Ô∏è PASTE YOUR MYSTERY IMAGE LINK HERE üõ†Ô∏è ---
const mysteryImage = "data:image/png;base64,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"; 

// --- USER AUTHENTICATION SYSTEM ---
let currentUser = JSON.parse(localStorage.getItem('prnt_user')) || null;

function checkLoginState() {
    const btn = document.getElementById('user-btn');
    const welcome = document.getElementById('welcome-msg');
    
    if (currentUser) {
        btn.innerHTML = `üë§ ${currentUser.name}`;
        welcome.innerHTML = `Welcome back, ${currentUser.name}.`;
        
        // Hide guest fields in cart
        document.getElementById('guest-checkout-fields').style.display = 'none';
        
        // Update Profile View
        document.getElementById('login-form').style.display = 'none';
        document.getElementById('profile-view').style.display = 'block';
        document.getElementById('profile-name').innerText = currentUser.name;
        document.getElementById('profile-email').innerText = currentUser.email || 'N/A';
    } else {
        btn.innerHTML = `üë§ Login`;
        welcome.innerHTML = `Freshly Printed.`;
        document.getElementById('guest-checkout-fields').style.display = 'block';
        
        // Show Login Form
        document.getElementById('login-form').style.display = 'block';
        document.getElementById('profile-view').style.display = 'none';
    }
}

function login() {
    const name = document.getElementById('login-name').value;
    const email = document.getElementById('login-email').value;
    
    if(!name) { alert("Please enter your name!"); return; }
    
    currentUser = { name: name, email: email };
    localStorage.setItem('prnt_user', JSON.stringify(currentUser));
    
    checkLoginState();
    toggleLogin(); // Close modal
}

function logout() {
    currentUser = null;
    localStorage.removeItem('prnt_user');
    checkLoginState();
    toggleLogin();
}

function toggleLogin() {
    const modal = document.getElementById('login-modal');
    modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
    if(modal.style.display === 'flex') setTimeout(() => modal.style.opacity = '1', 10);
    else modal.style.opacity = '0';
}

// --- PRODUCT DATA ---
const products = [
    { id: 1, name: "Articulated Dragon", price: 5.00, cat: "decor", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/US298af8211cf174/design/2025-12-24_f16687f23e846.png?x-oss-process=image/resize,w_400/format,webp" },
    { id: 2, name: "Phone Stand", price: 3.00, cat: "tech", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/US30d1cdf1dfd2ec/design/2025-12-21_0444552b3c14b.jpg?x-oss-process=image/resize,w_1000/format,webp" },
    { id: 3, name: "Fidget Cube", price: 2.00, cat: "fidget", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/US2ecaa913482ae4/design/2025-07-03_e4c8e21007a008.jpg?x-oss-process=image/resize,w_400/format,webp" },
    { id: 4, name: "Controller Stand", price: 8.00, cat: "tech", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/USa0b3644d260674/design/2024-03-14_431474b151b9b.png?x-oss-process=image/resize,w_400/format,webp" },
    { id: 5, name: "Spiral Fidget", price: 3.00, cat: "fidget", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/UScf4025d436c6df/design/2025-11-08_0607cb90063fd.jpg?x-oss-process=image/resize,w_400/format,webp" },
    { id: 6, name: "Blanket Fidget", price: 5.00, cat: "fidget", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/US2e230a38334cc9/design/2024-12-18_73ca0f4294103.jpeg?x-oss-process=image/resize,w_1000/format,webp" },
    { id: 7, name: "Star Fidget", price: 3.00, cat: "fidget", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/US315ad26a65a9e/design/2024-09-23_4a173a1c6e039.png?x-oss-process=image/resize,w_1000/format,webp" },
    { id: 8, name: "Clicker Fidget", price: 1.00, cat: "fidget", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/USc40f1f70049c83/design/2025-11-13_207cec449ea8a.png?x-oss-process=image/resize,w_1000/format,webp" },
    { id: 99, name: "Mystery Print (Gacha)", price: 2.00, cat: "fidget", stock: "ok", image: mysteryImage },
    
    
    // NEW BUNDLES
    { id: 101, name: "Fidget Frenzy Bundle", price: 5.00, cat: "bundle", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/US298af8211cf174/design/2025-12-24_f16687f23e846.png?x-oss-process=image/resize,w_400/format,webp" }, 
    { id: 102, name: "Tech Loadout Bundle", price: 10.00, cat: "bundle", stock: "ok", image: "https://makerworld.bblmw.com/makerworld/model/USa0b3644d260674/design/2024-03-14_431474b151b9b.png?x-oss-process=image/resize,w_400/format,webp" },
    { id: 103, name: "Mystery Sack (3x)", price: 5.00, cat: "bundle", stock: "ok", image: mysteryImage }
    { id: 104, name: "Saint Clair Merch Bundle", price 20.00, cat: "bundle", stock: out, image: "data:image/jpeg;base64,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"
];

const colorOptions = ["Random / Surprise Me", "Black", "White", "Blue", "Red", "Green", "Multicolor (+$2)"];

// --- LOGIC ---
let cart = [];
const grid = document.getElementById('product-grid');
const tsGrid = document.getElementById('top-sellers-grid');

// 1. RENDER TOP SELLERS (Hardcoded IDs)
function renderTopSellers() {
    const topIds = [5,7,8];
    const topItems = products.filter(p => topIds.includes(p.id));
    
    tsGrid.innerHTML = topItems.map(p => {
        let options = colorOptions.map(c => `<option value="${c}">${c}</option>`).join('');
        return `
        <div class="product-card">
            <div class="image-container" style="height: 150px;">
                <img src="${p.image}" alt="${p.name}" class="product-img">
            </div>
            <div style="padding: 10px;">
                <h3 style="font-size:0.9rem; margin:0;">${p.name}</h3>
                <div style="color:#888; font-size:0.9rem;">$${p.price.toFixed(2)}</div>
                <select id="ts-color-${p.id}" class="color-select" style="margin:5px 0;">${options}</select>
                <button class="add-btn" onclick="addToCart(${p.id}, 'ts-')">Add</button>
            </div>
        </div>
    `}).join('');
}

// 2. RENDER MAIN GRID
function renderGrid(filterCat) {
    const filtered = filterCat === 'all' ? products : products.filter(p => p.cat === filterCat);
    
    grid.innerHTML = filtered.map(p => {
        let badgeHtml = '';
        let btnDisabled = '';
        let btnText = 'Add to Cart';
        
        if (p.id === 99 || p.cat === 'bundle') badgeHtml = `<div class="badge mystery">DEAL</div>`;
        else if (p.stock === 'low') badgeHtml = `<div class="badge low">Low Stock</div>`;
        
        if (p.stock === 'out') {
            badgeHtml = `<div class="badge out">Sold Out</div>`;
            btnDisabled = 'disabled';
            btnText = 'Sold Out';
        }

        const options = colorOptions.map(c => `<option value="${c}">${c}</option>`).join('');

        return `
        <div class="product-card">
            ${badgeHtml}
            <div class="image-container">
                <img src="${p.image}" alt="${p.name}" class="product-img">
            </div>
            <div style="padding: 0 15px 15px;">
                <div class="info">
                    <h3 class="product-name">${p.name}</h3>
                    <div class="product-price">$${p.price.toFixed(2)}</div>
                </div>
                
                <select id="color-${p.id}" class="color-select" ${btnDisabled}>
                    ${options}
                </select>

                <button class="add-btn" onclick="addToCart(${p.id})" ${btnDisabled}>${btnText}</button>
            </div>
        </div>
    `}).join('');
}

function filterProducts(category, btn) {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderGrid(category);
}

// 3. CART FUNCTIONS (With Bundle Logic)
function addToCart(id, prefix = '') {
    const item = products.find(p => p.id === id);
    const colorSelect = document.getElementById(`${prefix}color-${id}`);
    const selectedColor = colorSelect ? colorSelect.value : "Random";

    cart.push({ ...item, selectedColor });
    updateCartUI();
    toggleCart();
}

function removeFromCart(index) {
    cart.splice(index, 1);
    updateCartUI();
}

function updateCartUI() {
    document.getElementById('cart-count').innerText = cart.length;
    const container = document.getElementById('cart-items');
    let total = 0;
    
    // Render Items
    const itemsHtml = cart.map((item, index) => {
        total += item.price;
        return `
        <div class="cart-item">
            <div>
                <div>${item.name}</div>
                <div class="cart-item-details">Color: ${item.selectedColor}</div>
            </div>
            <div>$${item.price.toFixed(2)} <span class="remove" onclick="removeFromCart(${index})">Remove</span></div>
        </div>`;
    }).join('');

    // Bundle Logic
    let discountHtml = '';
    if (cart.length >= 3) {
        total -= 2.00;
        discountHtml = `<div class="discount-row"><span>Bundle Discount (3+ Items)</span><span>-$2.00</span></div>`;
    }

    if (cart.length === 0) container.innerHTML = '<p style="color:#888">Your cart is empty.</p>';
    else container.innerHTML = itemsHtml + discountHtml;
    
    document.getElementById('cart-total').innerText = total.toFixed(2);
}

function checkout() {
    if (cart.length === 0) { alert("Cart is empty"); return; }
    
    // Check if we use logged in name or guest name
    let name = "";
    if (currentUser) {
        name = currentUser.name;
    } else {
        name = document.getElementById('guest-name').value;
    }

    if (!name) { alert("Please enter your name"); return; }

    let total = 0;
    let list = cart.map(i => { total += i.price; return `‚Ä¢ ${i.name} [${i.selectedColor}] - $${i.price}`; }).join('%0D%0A');
    
    // Apply discount logic in text
    if (cart.length >= 3) {
        total -= 2.00;
        list += '%0D%0A‚Ä¢ BUNDLE DISCOUNT applied (-$2.00)';
    }

    const subject = `Order for ${name}`;
    const body = `Hi, I'd like to buy:%0D%0A%0D%0A${list}%0D%0A%0D%0ATotal: $${total.toFixed(2)}%0D%0A%0D%0APaying via Cash or Apple Pay at Locker 253.`;
    window.location.href = `mailto:${myEmail}?subject=${subject}&body=${body}`;
}

// 4. UTILS
function toggleTheme() {
    document.body.classList.toggle('dark-mode');
    localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
}

function toggleBossMode() {
    const screen = document.getElementById('boss-screen');
    screen.style.display = screen.style.display === 'block' ? 'none' : 'block';
}

function updateCountdown() {
    const now = new Date();
    const nextDrop = new Date();
    nextDrop.setDate(now.getDate() + (1 + 7 - now.getDay()) % 7);
    nextDrop.setHours(8, 0, 0, 0);
    if (nextDrop < now) nextDrop.setDate(nextDrop.getDate() + 7);

    const diff = nextDrop - now;
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((diff / 1000 / 60) % 60);
    document.getElementById('countdown').innerText = `${days}d ${hours}h ${minutes}m`;
}
setInterval(updateCountdown, 60000);
updateCountdown();

// Init
if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');
renderGrid('all');
renderTopSellers();
checkLoginState(); // Check if user is logged in

function toggleCart() {
    const modal = document.getElementById('cart-modal');
    modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
    if(modal.style.display === 'flex') setTimeout(() => modal.style.opacity = '1', 10);
    else modal.style.opacity = '0';
}
document.getElementById('cart-modal').addEventListener('click', (e) => {
    if (e.target === document.getElementById('cart-modal')) toggleCart();
});
document.getElementById('login-modal').addEventListener('click', (e) => {
    if (e.target === document.getElementById('login-modal')) toggleLogin();
});
</script>
</body>
</html>
